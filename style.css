:root{
  --bg:#faf8ef;
  --board:#bbada0;
  --tile-empty:rgba(238,228,218,0.35);
  --tile-size:80px;
  --gap:12px;
  --radius:8px;
  --accent:#776e65;
}

*{box-sizing:border-box}
body{margin:0;background:var(--bg);font-family:Inter,Segoe UI,Roboto,Arial;color:#333}
.app{max-width:980px;margin:24px auto;padding:16px}
.topbar{display:flex;justify-content:space-between;align-items:center}
.topbar h1{margin:0;font-size:24px}
.subtitle{margin:0;color:#666;font-size:13px}
.score-area{display:flex;gap:10px}
.score-box{background:#fff;padding:8px 12px;border-radius:8px;text-align:center;min-width:80px}
.score-box .label{font-size:12px;color:#666}
.score-box .value{font-weight:700;font-size:18px}

.main{display:flex;gap:20px;margin-top:18px;align-items:flex-start}
.game-panel{flex:1}
.sidebar{width:280px}

.board{
  background:var(--board);
  padding:var(--gap);
  border-radius:12px;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:var(--gap);
  width:calc(4*var(--tile-size)+3*var(--gap));
  height:calc(4*var(--tile-size)+3*var(--gap));
  position:relative;
}

/* placeholder cells */
.cell{
  width:var(--tile-size);
  height:var(--tile-size);
  border-radius:6px;
  background:var(--tile-empty);
  display:flex;align-items:center;justify-content:center;
}

/* tiles are inside cells (we style cells directly to keep DOM simple) */
.tile{
  width:100%;
  height:100%;
  display:flex;align-items:center;justify-content:center;
  font-weight:700;font-size:20px;border-radius:6px;
  transition:transform 120ms ease, background 120ms linear, color 120ms linear;
}

/* colors for tiles */
.t-2{background:#eee4da;color:#776e65}
.t-4{background:#ede0c8;color:#776e65}
.t-8{background:#f2b179;color:#f9f6f2}
.t-16{background:#f59563;color:#f9f6f2}
.t-32{background:#f67c5f;color:#f9f6f2}
.t-64{background:#f65e3b;color:#f9f6f2}
.t-128{background:#edcf72;color:#f9f6f2}
.t-256{background:#edcc61;color:#f9f6f2}
.t-512{background:#edc850;color:#f9f6f2}
.t-1024{background:#edc53f;color:#f9f6f2}
.t-2048{background:#edc22e;color:#f9f6f2}

.controls{margin-top:12px;display:flex;gap:8px}
.control{background:#fff;padding:8px 10px;border-radius:8px;border:0;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,0.06)}

.card{background:#fff;padding:12px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
.leaders-list{display:flex;flex-direction:column;gap:6px;max-height:300px;overflow:auto}
.leader-row{display:flex;justify-content:space-between;padding:6px;border-radius:6px}

.modal{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center}
.modal.hidden{display:none}
.modal-box{background:#fff;padding:16px;border-radius:8px;min-width:300px;max-width:90%}
.modal-text{margin-bottom:8px}
.modal-input{width:100%;padding:8px;border-radius:6px;border:1px solid #ddd;margin-bottom:8px}
.modal-actions{display:flex;gap:8px;justify-content:flex-end}
.modal-btn{padding:8px 10px;border-radius:6px;border:0;background:#f0f0f0;cursor:pointer}

/* mobile controls */
.mobile-controls{display:none;margin-top:12px;align-items:center;justify-content:center;gap:8px}
.mbtn{width:58px;height:58px;border-radius:8px;border:0;background:#fff;cursor:pointer;font-size:18px;box-shadow:0 6px 18px rgba(0,0,0,0.05)}
.mobile-controls .row{display:flex;gap:8px;align-items:center}

/* responsive */
@media (max-width:900px){
  .app{padding:12px}
  .main{flex-direction:column;align-items:center}
  .sidebar{width:100%}
  .mobile-controls{display:flex}
  .board{width:calc(100vw - 64px);height:calc(100vw - 64px);max-width:420px;max-height:420px}
  :root{--tile-size:calc((100vw - 64px - 3*var(--gap))/4)}
}

